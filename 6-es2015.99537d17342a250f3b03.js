(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{ALb8:function(t,e,r){"use strict";r.r(e),r.d(e,"EditorModule",function(){return g});var i=r("ey9i"),o=r("lJxs"),s=r("JIr8"),c=r("fXoL"),a=r("tyNb");let n=(()=>{class t{constructor(t,e,r){this.articlesService=t,this.router=e,this.userService=r}resolve(t,e){return this.articlesService.get(t.params.slug).pipe(Object(o.a)(t=>{if(this.userService.getCurrentUser().username===t.author.username)return t;this.router.navigateByUrl("/")}),Object(s.a)(t=>this.router.navigateByUrl("/")))}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(i.a),c.Rb(a.b),c.Rb(i.g))},t.\u0275prov=c.Eb({token:t,factory:t.\u0275fac}),t})();var l=r("M0ag"),b=r("3Pt+"),u=r("vWSW"),p=r("ofXK");function d(t,e){if(1&t){const t=c.Ob();c.Nb(0,"span",15),c.Nb(1,"i",16),c.Ub("click",function(){c.hc(t);const r=e.$implicit;return c.Wb().removeTag(r)}),c.Mb(),c.mc(2),c.Mb()}if(2&t){const t=e.$implicit;c.yb(2),c.oc(" ",t," ")}}let f=(()=>{class t{constructor(t,e,r,i){this.articlesService=t,this.route=e,this.router=r,this.fb=i,this.article={},this.tagField=new b.c,this.errors={},this.isSubmitting=!1,this.articleForm=this.fb.group({title:"",description:"",body:""}),this.article.tagList=[]}ngOnInit(){this.route.data.subscribe(t=>{t.article&&(this.article=t.article,this.articleForm.patchValue(t.article))})}addTag(){const t=this.tagField.value;this.article.tagList.indexOf(t)<0&&this.article.tagList.push(t),this.tagField.reset("")}removeTag(t){this.article.tagList=this.article.tagList.filter(e=>e!==t)}submitForm(){this.isSubmitting=!0,this.updateArticle(this.articleForm.value),this.articlesService.save(this.article).subscribe(t=>this.router.navigateByUrl("/article/"+t.slug),t=>{this.errors=t,this.isSubmitting=!1})}updateArticle(t){Object.assign(this.article,t)}}return t.\u0275fac=function(e){return new(e||t)(c.Ib(i.a),c.Ib(a.a),c.Ib(a.b),c.Ib(b.b))},t.\u0275cmp=c.Cb({type:t,selectors:[["app-editor-page"]],decls:20,vars:5,consts:[[1,"editor-page"],[1,"container","page"],[1,"row"],[1,"col-md-10","offset-md-1","col-xs-12"],[3,"errors"],[3,"formGroup"],[3,"disabled"],[1,"form-group"],["formControlName","title","type","text","placeholder","Article Title",1,"form-control","form-control-lg"],["formControlName","description","type","text","placeholder","What's this article about?",1,"form-control"],["formControlName","body","rows","8","placeholder","Write your article (in markdown)",1,"form-control"],["type","text","placeholder","Enter tags",1,"form-control",3,"formControl","keyup.enter"],[1,"tag-list"],["class","tag-default tag-pill",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-lg","pull-xs-right","btn-primary",3,"click"],[1,"tag-default","tag-pill"],[1,"ion-close-round",3,"click"]],template:function(t,e){1&t&&(c.Nb(0,"div",0),c.Nb(1,"div",1),c.Nb(2,"div",2),c.Nb(3,"div",3),c.Jb(4,"app-list-errors",4),c.Nb(5,"form",5),c.Nb(6,"fieldset",6),c.Nb(7,"fieldset",7),c.Jb(8,"input",8),c.Mb(),c.Nb(9,"fieldset",7),c.Jb(10,"input",9),c.Mb(),c.Nb(11,"fieldset",7),c.Nb(12,"textarea",10),c.mc(13,"              "),c.Mb(),c.Mb(),c.Nb(14,"fieldset",7),c.Nb(15,"input",11),c.Ub("keyup.enter",function(){return e.addTag()}),c.Mb(),c.Nb(16,"div",12),c.lc(17,d,3,1,"span",13),c.Mb(),c.Mb(),c.Nb(18,"button",14),c.Ub("click",function(){return e.submitForm()}),c.mc(19," Publish Article "),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb()),2&t&&(c.yb(4),c.cc("errors",e.errors),c.yb(1),c.cc("formGroup",e.articleForm),c.yb(1),c.cc("disabled",e.isSubmitting),c.yb(9),c.cc("formControl",e.tagField),c.yb(2),c.cc("ngForOf",e.article.tagList))},directives:[u.a,b.m,b.i,b.f,b.a,b.h,b.e,b.d,p.j],encapsulation:2}),t})();const h=[{path:"",component:f,canActivate:[i.b]},{path:":slug",component:f,canActivate:[i.b],resolve:{article:n}}];let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({imports:[[a.e.forChild(h)],a.e]}),t})(),g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({providers:[n],imports:[[l.a,m]]}),t})()}}]);